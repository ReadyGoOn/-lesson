<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>闭包</title>
</head>
<body>
    <h1>1.什么是闭包？</h1>
    函数嵌套函数<br/>
    内部引用外部函数的参数和局部变量<br/>
    参数和局部变量不会被垃圾回收机制所收回；
    <h1>2.闭包有什么好处？应用在哪里</h1>
    1.希望一个变量长期驻扎在内存中</br/>
    2.避免全局变量的污染<br/>
    3.私有成员的存在<br/>
    <p>
    作用：<br/>
    1.模块化<br/>
    2.循环中可以找到对应元素的索引
    </p>
    <h1>3.闭包需要注意什么？</h1>
    IE下会引发内存泄露
    <h1>js中的垃圾回收机制</h1>
    一般函数执行后，参数和其局部变量会被垃圾回收机制所收回。
    但闭包不会。
    <ul>
        <li>111</li>
        <li>222</li>
        <li>333</li>
    </ul>
<script>
    window.onload = function(){
        var oli = document.getElementsByTagName('li');
        // 循环中可以找到对应元素的索引
        // for(var i=0,len=oli.length;i<len;i++){
        //     (function(i){
        //         oli[i].onclick = function(){
        //             alert(i)
        //         }
        //     })(i)
        // }

        // 循环中可以找到对应元素的索引
        for(var i=0,len=oli.length;i<len;i++){
            oli[i].onclick = (function(i){
                return function(){
                    alert(i)
                }
            })(i)

        }
        //模块化
        var obj = (function(){
            var a = 1;
            function aa(){
                a++;
                console.log(a)
            };
             function bb(){
                a++;
                console.log(a)
            }
            return {
                a:aa,
                b:bb
            }
        })()

        obj.a();
        obj.b();
    }
    
</script>
</body>
</html>