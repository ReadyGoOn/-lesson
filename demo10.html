<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>百叶窗效果</title>
    <style>
    *{
        margin:0;
        padding:0;
    }
    #ul1,#ul2{
        width: 200px;
        float: left;
        border-top:1px solid #000;
        margin:50px;
    }
    li{
        list-style: none;
        width: 100%;
        height: 30px;
        overflow: hidden;
        position: relative;
        border-bottom: 1px dashed #333;
        line-height: 30px;
    }
    div{
        position: absolute;
        top:-30px;
    }
    p{
        height:30px;
    }
    </style>
</head>
<body>
    <h1>百叶窗效果</h1>
    <ul id="ul1">
        <li>
            <div>
                <p>11111111111</p>
                <p>2222222222</p>
            </div>
        </li>
        <li>
            <div>
                <p>33333333333</p>
                <p>444444444444444</p>
            </div>
        </li>
        <li>
            <div>
                <p>55555555555555</p>
                <p>6666666666666666666</p>
            </div>
        </li>
        <li>
            <div>
                <p>6777777777777</p>
                <p>88888888888888</p>
            </div>
        </li>
        <li>
            <div>
                <p>999999999999999999</p>
                <p>000000000000000</p>
            </div>
        </li>
        <li>
            <div>
                <p>aaaaaaaaaaaaaaaaaa</p>
                <p>bbbbbbbbbbbbbbbbb</p>
            </div>
        </li>
    </ul>
      <ul id="ul2">
        <li>
            <div>
                <p>qqqqqqq11111111111</p>
                <p>qqqqqqq2222222222</p>
            </div>
        </li>
        <li>
            <div>
                <p>qqqqqq33333333333</p>
                <p>qqqq444444444444444</p>
            </div>
        </li>
        <li>
            <div>
                <p>qqqqq55555555555555</p>
                <p>qqqqqqqq6666666666666666666</p>
            </div>
        </li>
        <li>
            <div>
                <p>qqqqqq6777777777777</p>
                <p>qqqqqq88888888888888</p>
            </div>
        </li>
        <li>
            <div>
                <p>qqqqq999999999999999999</p>
                <p>qqqqqqq000000000000000</p>
            </div>
        </li>
        <li>
            <div>
                <p>qqqqqqqaaaaaaaaaaaaaaaaaa</p>
                <p>qqqqqqqbbbbbbbbbbbbbbbbb</p>
            </div>
        </li>
    </ul>
    <script src="common.js"></script>
    <script>
        window.onload =function(){
            var oul = document.getElementById("ul1");
            var oul2 = document.getElementById("ul2");
            
            toShow(oul);
            setTimeout(function(){
                toShow(oul2);
            },2000);
            
            function toShow(obj){
                var odiv = obj.getElementsByTagName('div');
                var timer = null ;
            var inow = 0 ;
            var flag = true;
                // console.log(odiv);
                setInterval(function(){
                    toChange(odiv);
                },4000);

                function toChange(odiv){
                    timer = setInterval(function(){
                            if(inow == odiv.length){
                                clearInterval(timer);
                                inow = 0 ;
                                flag = !flag;
                            }else if(flag){
                                startMove(odiv[inow],{top:0});
                                inow++;
                            }else{
                                startMove(odiv[inow],{top:-30});
                                inow++;
                            }
                        
                        },100);
                    }
            }

            

            // /* 
            // - obj 指的是DOM对象 
            // - json 指的是 CSS样式 
            // - 例 startMove(oDiv,{width:100,height:100},function(){}) 
            // */  

            // function startMove(obj,json,fnEnd){  
            //     clearInterval(obj.timer);   //先清除之前的定时器  
            //     obj.timer = setInterval(function(){  
            //         var bStop = true;   // 假设所有的值都到了  
            //         for( var attr in json ){    //遍历json属性  
            //             var cur = (attr == 'opacity') ? Math.round(parseFloat(getStyle(obj,attr))*100) : parseInt(getStyle(obj,attr)); //对opacity 特殊处理  
            //             var speed = (json[attr] - cur)/6;  
            //             speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);    //speed 数字转化，防止不能到达目标的bug  
            //             if( cur != json[attr]) bStop = false;   //如果没有达到目标值，则bStop设为false;  
            //             if(attr == 'opacity'){  
            //                 obj.style.filter = 'alpha(opacity='+ (cur + speed) +')';  
            //                 obj.style.opacity = (cur + speed)/100;  
            //             }else{  
            //                 obj.style[attr] = cur + speed + 'px';     
            //             }     
            //         }  
            //         if(bStop){  
            //             clearInterval(obj.timer);  
            //             if(fnEnd) fnEnd();   //执行回调函数  
            //         }  
            //     },30);  
            // }

            // function getStyle(obj,name){  
            //     return obj.currentStyle ? obj.currentStyle[name] : window.getComputedStyle(obj,null)[name]; //浏览器兼容性处理，注意getComputedStyle为只读属性  
            // }  
            
            // function getByClass(oParent,sClass){  
            //     var aEle = oParent.getElementsByTagName('*');  
            //     var aResult =[];  
            //     var re = new RegExp('\\b' + sClass + '\\b','i');  
            //     for(var i=0; i<aEle.length;i++ ){  
            //         if(re.test(aEle[i].className)) aResult.push(aEle[i]);  
            //     }  
            //     return aResult;  
            // } 
        }
    </script>
</body>
</html>